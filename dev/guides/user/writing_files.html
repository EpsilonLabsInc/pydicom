<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Writing DICOM Files &mdash; pydicom 3.0.0.dev0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/pydicom.css?v=0279de7d" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/pydicom.css?v=0279de7d" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=61a4c737" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=afcbd73c"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ccdb6887"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Working with Pixel Data" href="working_with_pixel_data.html" />
    <link rel="prev" title="Core elements in pydicom" href="base_element.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pydicom
              <img src="../../_static/pydicom_flat_black.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0.dev0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/installation.html">How to install pydicom</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">pydicom User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="base_element.html">Core elements in pydicom</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Writing DICOM Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-codify">Using <code class="docutils literal notranslate"><span class="pre">codify</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-a-file-from-scratch">Writing a file from scratch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="working_with_pixel_data.html">Working with Pixel Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="working_with_overlays.html">Working with Overlay Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="working_with_waveforms.html">Working with Waveform Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_data_handlers.html">Handling of compressed pixel data</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_data_compression.html">Compressing <em>Pixel Data</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="viewing_images.html">Viewing Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="private_data_elements.html">Private Data Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="best_practices.html">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html">General examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html#image-processing">Image processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html#input-output">Input-output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html#metadata-processing">Metadata processing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/contributing.html">Contributing to pydicom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes/index.html">Release notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pydicom</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">pydicom User Guide</a></li>
      <li class="breadcrumb-item active">Writing DICOM Files</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="writing-dicom-files">
<span id="id1"></span><h1>Writing DICOM Files<a class="headerlink" href="#writing-dicom-files" title="Link to this heading">¶</a></h1>
<p class="rubric">How to write DICOM files using pydicom.</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>Probably the most common use of <em>pydicom</em> is to read an existing DICOM file,
alter some items, and write it back out again. The <a class="reference internal" href="../../tutorials/dataset_basics.html"><span class="doc">Dataset basics tutorial</span></a> shows how to do this.</p>
<p>If you need to create a DICOM file from scratch then you can either:</p>
<ul class="simple">
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">codify</span></code> script to create Python code from an existing dataset.</p></li>
<li><p>Create a new <a class="reference internal" href="../../reference/generated/pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> instance and populate it.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To be truly DICOM compliant, certain data elements will be required in the
file meta information and in the main dataset. Also, you should create your
own UIDs, implementation name, and so on.</p>
</div>
</section>
<section id="using-codify">
<span id="writing-files-using-codify"></span><h2>Using <code class="docutils literal notranslate"><span class="pre">codify</span></code><a class="headerlink" href="#using-codify" title="Link to this heading">¶</a></h2>
<p><em>pydicom</em> has a command-line utility called <code class="docutils literal notranslate"><span class="pre">codify</span></code> that
takes an existing DICOM file, and produces Python code that can be run to
produce a copy of the original file.</p>
<p>In other words: <em>pydicom</em> has a tool that can automatically generate
well-designed Python code for you - code that creates DICOM files. The only
requirement is that you have an existing DICOM file that looks approximately
like the one you need. You can then use the code as a model to work from. The
tool is especially useful with sequences, which can be tricky to code
correctly.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The code produced by <code class="docutils literal notranslate"><span class="pre">codify</span></code> will contain all the information in the original
file, which may include private health information or other sensitive
information.  If the code is run, the resulting DICOM file will also contain
that information. You may want to consider using de-identified DICOM files
with <code class="docutils literal notranslate"><span class="pre">codify</span></code>, or handling the output files according to your requirements for
sensitive information.</p>
</div>
<p>One issue to be aware of is that <code class="docutils literal notranslate"><span class="pre">codify</span></code> will not create code for large items
like pixel data. Instead it creates a line like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">PixelData</span> <span class="o">=</span> <span class="c1"># XXX Array of 524288 bytes excluded</span>
</pre></div>
</div>
<p>In that case, the code will produce a syntax error when run, and you will have
to edit the code to supply a valid value.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--exclude-size</span> <span class="pre">parameter</span></code> can set the maximum size of the data
element value that is coded. Data elements bigger than that will have the
syntax error line as shown above.</p>
</div>
<p>One potential disadvantage of <code class="docutils literal notranslate"><span class="pre">codify</span></code>, depending on your use case, is that it
does not create loops. If you have, say, 30 items in a Sequence, <code class="docutils literal notranslate"><span class="pre">codify</span></code> will
produce code that makes them one at a time. Code you wrote by hand would
likely create them in a loop, because most of the code needed is quite
repetitive. If you want to switch to a loop, you could use the first item’s
code as a starting point, and modify as needed, deleting the code for the
other individual items.</p>
<p>For details on calling the <code class="docutils literal notranslate"><span class="pre">codify</span></code> command, see the <a class="reference internal" href="../cli/cli_guide.html#cli-codify"><span class="std std-ref">pydicom codify command</span></a> section.</p>
<p><code class="docutils literal notranslate"><span class="pre">codify</span></code> could also be called from code, rather than from a command line; you
can look at the codify.py source and the <code class="docutils literal notranslate"><span class="pre">code_file</span></code> function for a
starting point for that.</p>
</section>
<section id="writing-a-file-from-scratch">
<h2>Writing a file from scratch<a class="headerlink" href="#writing-a-file-from-scratch" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">codify</span></code> tool, described in the previous section, is a good starting point
for <em>pydicom</em> code, but if you can’t (or don’t want to) use that tool, then you
can certainly write code from scratch to make a complete DICOM file using
<em>pydicom</em>.</p>
<p>It’s not particularly difficult, but to produce a valid DICOM file requires
specific items to be created.  A basic example of that is available in the
example file <a class="reference internal" href="../../auto_examples/input_output/plot_write_dicom.html#sphx-glr-auto-examples-input-output-plot-write-dicom-py"><span class="std std-ref">Write DICOM data</span></a>.</p>
<p>Just don’t forget the warnings in the Introduction section above, and be sure
to create all the required DICOM data elements.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="base_element.html" class="btn btn-neutral float-left" title="Core elements in pydicom" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="working_with_pixel_data.html" class="btn btn-neutral float-right" title="Working with Pixel Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2008-2024, Darcy Mason and pydicom contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>