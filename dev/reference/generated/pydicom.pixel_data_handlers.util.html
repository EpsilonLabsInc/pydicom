<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pydicom.pixel_data_handlers.util &mdash; pydicom 3.0.0.dev0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/pydicom.css?v=0279de7d" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/pydicom.css?v=0279de7d" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=61a4c737" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=afcbd73c"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ccdb6887"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Miscellaneous (pydicom.misc)" href="../misc.html" />
    <link rel="prev" title="pydicom.pixel_data_handlers.convert_color_space" href="pydicom.pixel_data_handlers.convert_color_space.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pydicom
              <img src="../../_static/pydicom_flat_black.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0.dev0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/installation.html">How to install pydicom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../old/getting_started.html">Introduction to pydicom</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../old/pydicom_user_guide.html">pydicom User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../old/ref_guide.html">Reading and writing DICOM files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/index.html">Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../charset.html">Character Encoding and Decoding (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.charset</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html">Configuration Options (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.config</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data.html">Getting Included Datasets (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.data</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datadict.html">Data Dictionary Utilities (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.datadict</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dataset.html">Representation of Datasets (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.dataset</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../elem.html">Representation of Data Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html">Example Datasets (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.examples</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../encaps.html">Bulk Data Encapsulation Utilities (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.encaps</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../encoders.html">Pixel Data Encoders (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.encoders</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../errors.html">Exceptions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.errors</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fileio.html">Dataset IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fileset.html">DICOM File-sets (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.fileset</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../handlers.html">Bulk Data Handlers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../handlers.html#pixel-data-utilities">Pixel Data Utilities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pydicom.pixel_data_handlers.apply_color_lut.html">pydicom.pixel_data_handlers.apply_color_lut</a></li>
<li class="toctree-l3"><a class="reference internal" href="pydicom.pixel_data_handlers.apply_modality_lut.html">pydicom.pixel_data_handlers.apply_modality_lut</a></li>
<li class="toctree-l3"><a class="reference internal" href="pydicom.pixel_data_handlers.apply_rescale.html">pydicom.pixel_data_handlers.apply_rescale</a></li>
<li class="toctree-l3"><a class="reference internal" href="pydicom.pixel_data_handlers.apply_windowing.html">pydicom.pixel_data_handlers.apply_windowing</a></li>
<li class="toctree-l3"><a class="reference internal" href="pydicom.pixel_data_handlers.apply_voi.html">pydicom.pixel_data_handlers.apply_voi</a></li>
<li class="toctree-l3"><a class="reference internal" href="pydicom.pixel_data_handlers.apply_voi_lut.html">pydicom.pixel_data_handlers.apply_voi_lut</a></li>
<li class="toctree-l3"><a class="reference internal" href="pydicom.pixel_data_handlers.convert_color_space.html">pydicom.pixel_data_handlers.convert_color_space</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">pydicom.pixel_data_handlers.util</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_color_lut"><code class="docutils literal notranslate"><span class="pre">apply_color_lut()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_modality_lut"><code class="docutils literal notranslate"><span class="pre">apply_modality_lut()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_voi"><code class="docutils literal notranslate"><span class="pre">apply_voi()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_voi_lut"><code class="docutils literal notranslate"><span class="pre">apply_voi_lut()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_windowing"><code class="docutils literal notranslate"><span class="pre">apply_windowing()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.convert_color_space"><code class="docutils literal notranslate"><span class="pre">convert_color_space()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.dtype_corrected_for_endianness"><code class="docutils literal notranslate"><span class="pre">dtype_corrected_for_endianness()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.expand_ybr422"><code class="docutils literal notranslate"><span class="pre">expand_ybr422()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.get_expected_length"><code class="docutils literal notranslate"><span class="pre">get_expected_length()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.get_image_pixel_ids"><code class="docutils literal notranslate"><span class="pre">get_image_pixel_ids()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.get_j2k_parameters"><code class="docutils literal notranslate"><span class="pre">get_j2k_parameters()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.get_nr_frames"><code class="docutils literal notranslate"><span class="pre">get_nr_frames()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.pack_bits"><code class="docutils literal notranslate"><span class="pre">pack_bits()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.pixel_dtype"><code class="docutils literal notranslate"><span class="pre">pixel_dtype()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.reshape_pixel_array"><code class="docutils literal notranslate"><span class="pre">reshape_pixel_array()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pydicom.pixel_data_handlers.util.unpack_bits"><code class="docutils literal notranslate"><span class="pre">unpack_bits()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../misc.html">Miscellaneous (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.misc</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overlays.html">Overlay Data Handling (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.overlays</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pixels.html">Pixel Data (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.pixels</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../waveforms.html">Waveform Data Handlers (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.waveforms</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uid.html">UID Definitions and Utilities (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydicom.uid</span></code>)</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html">General examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html#image-processing">Image processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html#input-output">Input-output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html#metadata-processing">Metadata processing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/contributing.html">Contributing to pydicom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes/index.html">Release notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pydicom</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="../handlers.html">Bulk Data Handlers</a></li>
      <li class="breadcrumb-item active">pydicom.pixel_data_handlers.util</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pydicom.pixel_data_handlers.util">
<span id="pydicom-pixel-data-handlers-util"></span><h1>pydicom.pixel_data_handlers.util<a class="headerlink" href="#module-pydicom.pixel_data_handlers.util" title="Link to this heading">¶</a></h1>
<p>Utility functions used in the pixel data handlers.</p>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_color_lut" title="pydicom.pixel_data_handlers.util.apply_color_lut"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_color_lut</span></code></a>(arr[, ds, palette])</p></td>
<td><p>Apply a color palette lookup table to <cite>arr</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_modality_lut" title="pydicom.pixel_data_handlers.util.apply_modality_lut"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_modality_lut</span></code></a>(arr, ds)</p></td>
<td><p>Apply a modality lookup table or rescale operation to <cite>arr</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_voi" title="pydicom.pixel_data_handlers.util.apply_voi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_voi</span></code></a>(arr, ds[, index])</p></td>
<td><p>Apply a VOI lookup table to <cite>arr</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_voi_lut" title="pydicom.pixel_data_handlers.util.apply_voi_lut"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_voi_lut</span></code></a>(arr, ds[, index, prefer_lut])</p></td>
<td><p>Apply a VOI lookup table or windowing operation to <cite>arr</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_windowing" title="pydicom.pixel_data_handlers.util.apply_windowing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_windowing</span></code></a>(arr, ds[, index])</p></td>
<td><p>Apply a windowing operation to <cite>arr</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.convert_color_space" title="pydicom.pixel_data_handlers.util.convert_color_space"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convert_color_space</span></code></a>(arr, current, desired[, ...])</p></td>
<td><p>Convert the image(s) in <cite>arr</cite> from one color space to another.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.dtype_corrected_for_endianness" title="pydicom.pixel_data_handlers.util.dtype_corrected_for_endianness"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dtype_corrected_for_endianness</span></code></a>(...)</p></td>
<td><p>Return a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code></a> corrected for system and <code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> endianness.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.expand_ybr422" title="pydicom.pixel_data_handlers.util.expand_ybr422"><code class="xref py py-obj docutils literal notranslate"><span class="pre">expand_ybr422</span></code></a>(src, bits_allocated)</p></td>
<td><p>Return <code class="docutils literal notranslate"><span class="pre">YBR_FULL_422</span></code> data expanded to <code class="docutils literal notranslate"><span class="pre">YBR_FULL</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.get_expected_length" title="pydicom.pixel_data_handlers.util.get_expected_length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_expected_length</span></code></a>(ds[, unit])</p></td>
<td><p>Return the expected length (in terms of bytes or pixels) of the <em>Pixel Data</em>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.get_image_pixel_ids" title="pydicom.pixel_data_handlers.util.get_image_pixel_ids"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_image_pixel_ids</span></code></a>(ds)</p></td>
<td><p>Return a dict of the pixel data affecting element's <a class="reference external" href="https://docs.python.org/3/library/functions.html#id" title="(in Python v3.12)"><code class="xref py py-func docutils literal notranslate"><span class="pre">id()</span></code></a> values.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.get_j2k_parameters" title="pydicom.pixel_data_handlers.util.get_j2k_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_j2k_parameters</span></code></a>(codestream)</p></td>
<td><p>Return a dict containing JPEG 2000 component parameters.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.get_nr_frames" title="pydicom.pixel_data_handlers.util.get_nr_frames"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_nr_frames</span></code></a>(ds[, warn])</p></td>
<td><p>Return NumberOfFrames or 1 if NumberOfFrames is None or 0.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.pack_bits" title="pydicom.pixel_data_handlers.util.pack_bits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pack_bits</span></code></a>(arr[, pad])</p></td>
<td><p>Pack a binary <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> for use with <em>Pixel Data</em>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.pixel_dtype" title="pydicom.pixel_data_handlers.util.pixel_dtype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pixel_dtype</span></code></a>(ds[, as_float])</p></td>
<td><p>Return a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code></a> for the pixel data in <cite>ds</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.reshape_pixel_array" title="pydicom.pixel_data_handlers.util.reshape_pixel_array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reshape_pixel_array</span></code></a>(ds, arr)</p></td>
<td><p>Return a reshaped <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> <cite>arr</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.unpack_bits" title="pydicom.pixel_data_handlers.util.unpack_bits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unpack_bits</span></code></a>(src[, as_array])</p></td>
<td><p>Unpack the bit-packed data in <cite>src</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.apply_color_lut">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">apply_color_lut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">palette</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="pydicom.uid.UID.html#pydicom.uid.UID" title="pydicom.uid.UID"><span class="pre">UID</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">np.ndarray</span></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L31"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.apply_color_lut" title="Link to this definition">¶</a></dt>
<dd><p>Apply a color palette lookup table to <cite>arr</cite>.</p>
<p>If (0028,1201-1203) <em>Palette Color Lookup Table Data</em> are missing
then (0028,1221-1223) <em>Segmented Palette Color Lookup Table Data</em> must be
present and vice versa. The presence of (0028,1204) <em>Alpha Palette Color
Lookup Table Data</em> or (0028,1224) <em>Alpha Segmented Palette Color Lookup
Table Data</em> is optional.</p>
<p>Use of this function with the <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.23.html">Enhanced Palette Color Lookup Table
Module</a> or <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.19.html">Supplemental Palette Color LUT
Module</a> is not currently supported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>numpy.ndarray</em></a>) – The pixel data to apply the color palette to.</p></li>
<li><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>dataset.Dataset</em></a><em>, </em><em>optional</em>) – Required if <cite>palette</cite> is not supplied. A
<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> containing a suitable
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.3.html">Image Pixel</a> or
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.9.html">Palette Color Lookup Table</a> Module.</p></li>
<li><p><strong>palette</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><a class="reference internal" href="pydicom.uid.UID.html#pydicom.uid.UID" title="pydicom.uid.UID"><em>uid.UID</em></a><em>, </em><em>optional</em>) – Required if <cite>ds</cite> is not supplied. The name of one of the
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part06/chapter_B.html">well-known</a> color palettes defined by the
DICOM Standard. One of: <code class="docutils literal notranslate"><span class="pre">'HOT_IRON'</span></code>, <code class="docutils literal notranslate"><span class="pre">'PET'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'HOT_METAL_BLUE'</span></code>, <code class="docutils literal notranslate"><span class="pre">'PET_20_STEP'</span></code>, <code class="docutils literal notranslate"><span class="pre">'SPRING'</span></code>, <code class="docutils literal notranslate"><span class="pre">'SUMMER'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'FALL'</span></code>, <code class="docutils literal notranslate"><span class="pre">'WINTER'</span></code> or the corresponding well-known (0008,0018)
<em>SOP Instance UID</em>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The RGB or RGBA pixel data as an array of <code class="docutils literal notranslate"><span class="pre">np.uint8</span></code> or <code class="docutils literal notranslate"><span class="pre">np.uint16</span></code>
values, depending on the 3rd value of (0028,1201) <em>Red Palette Color
Lookup Table Descriptor</em>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)">numpy.ndarray</a></p>
</dd>
</dl>
<p class="rubric">References</p>
<ul class="simple">
<li><p><a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.3.html">Image Pixel Module</a></p></li>
<li><p><a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.19.html">Supplemental Palette Color LUT Module</a></p></li>
<li><p><a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.23.html">Enhanced Palette Color LUT Module</a></p></li>
<li><p><a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.9.html">Palette Colour LUT Module</a></p></li>
<li><p><a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.8.16.2.html#sect_C.8.16.2.1.1.1">Supplemental Palette Color LUTs</a></p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.apply_modality_lut">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">apply_modality_lut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">np.ndarray</span></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L221"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.apply_modality_lut" title="Link to this definition">¶</a></dt>
<dd><p>Apply a modality lookup table or rescale operation to <cite>arr</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>numpy.ndarray</em></a>) – The <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a> to apply the modality LUT or rescale
operation to.</p></li>
<li><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>dataset.Dataset</em></a>) – A dataset containing a <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.11.html#sect_C.11.1">Modality LUT Module</a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array with applied modality LUT or rescale operation. If
(0028,3000) <em>Modality LUT Sequence</em> is present then returns an array
of <code class="docutils literal notranslate"><span class="pre">np.uint8</span></code> or <code class="docutils literal notranslate"><span class="pre">np.uint16</span></code>, depending on the 3rd value of
(0028,3002) <em>LUT Descriptor</em>. If (0028,1052) <em>Rescale Intercept</em> and
(0028,1053) <em>Rescale Slope</em> are present then returns an array of
<code class="docutils literal notranslate"><span class="pre">np.float64</span></code>. If neither are present then <cite>arr</cite> will be returned
unchanged.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)">numpy.ndarray</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>When <em>Rescale Slope</em> and <em>Rescale Intercept</em> are used, the output range
is from (min. pixel value * Rescale Slope + Rescale Intercept) to
(max. pixel value * Rescale Slope + Rescale Intercept), where min. and
max. pixel value are determined from (0028,0101) <em>Bits Stored</em> and
(0028,0103) <em>Pixel Representation</em>.</p>
<p class="rubric">References</p>
<ul class="simple">
<li><p>DICOM Standard, Part 3, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.11.html#sect_C.11.1">Annex C.11.1</a></p></li>
<li><p>DICOM Standard, Part 4, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part04/sect_N.2.html#sect_N.2.1.1">Annex N.2.1.1</a></p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.apply_voi">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">apply_voi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">np.ndarray</span></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L390"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.apply_voi" title="Link to this definition">¶</a></dt>
<dd><p>Apply a VOI lookup table to <cite>arr</cite>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>numpy.ndarray</em></a>) – The <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a> to apply the VOI LUT to.</p></li>
<li><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>dataset.Dataset</em></a>) – A dataset containing a <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.11.2.html">VOI LUT Module</a>.
If (0028,3010) <em>VOI LUT Sequence</em> is present then returns an array
of <code class="docutils literal notranslate"><span class="pre">np.uint8</span></code> or <code class="docutils literal notranslate"><span class="pre">np.uint16</span></code>, depending on the 3rd value of
(0028,3002) <em>LUT Descriptor</em>, otherwise <cite>arr</cite> will be returned
unchanged.</p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><em>optional</em>) – When the VOI LUT Module contains multiple alternative views, this is
the index of the view to return (default <code class="docutils literal notranslate"><span class="pre">0</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array with applied VOI LUT.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)">numpy.ndarray</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_modality_lut" title="pydicom.pixel_data_handlers.util.apply_modality_lut"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_modality_lut()</span></code></a>, <a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_windowing" title="pydicom.pixel_data_handlers.util.apply_windowing"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_windowing()</span></code></a></p>
</div>
<p class="rubric">References</p>
<ul class="simple">
<li><p>DICOM Standard, Part 3, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.11.html#sect_C.11.2">Annex C.11.2</a></p></li>
<li><p>DICOM Standard, Part 3, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.8.11.3.html#sect_C.8.11.3.1.5">Annex C.8.11.3.1.5</a></p></li>
<li><p>DICOM Standard, Part 4, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part04/sect_N.2.html#sect_N.2.1.1">Annex N.2.1.1</a></p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.apply_voi_lut">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">apply_voi_lut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefer_lut</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">np.ndarray</span></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L307"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.apply_voi_lut" title="Link to this definition">¶</a></dt>
<dd><p>Apply a VOI lookup table or windowing operation to <cite>arr</cite>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.1: </span>Added the <cite>prefer_lut</cite> keyword parameter</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>numpy.ndarray</em></a>) – The <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a> to apply the VOI LUT or windowing operation
to.</p></li>
<li><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>dataset.Dataset</em></a>) – A dataset containing a <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.11.2.html">VOI LUT Module</a>.
If (0028,3010) <em>VOI LUT Sequence</em> is present then returns an array
of <code class="docutils literal notranslate"><span class="pre">np.uint8</span></code> or <code class="docutils literal notranslate"><span class="pre">np.uint16</span></code>, depending on the 3rd value of
(0028,3002) <em>LUT Descriptor</em>. If (0028,1050) <em>Window Center</em> and
(0028,1051) <em>Window Width</em> are present then returns an array of
<code class="docutils literal notranslate"><span class="pre">np.float64</span></code>. If neither are present then <cite>arr</cite> will be returned
unchanged.</p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><em>optional</em>) – When the VOI LUT Module contains multiple alternative views, this is
the index of the view to return (default <code class="docutils literal notranslate"><span class="pre">0</span></code>).</p></li>
<li><p><strong>prefer_lut</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – When the VOI LUT Module contains both <em>Window Width</em>/<em>Window Center</em>
and <em>VOI LUT Sequence</em>, if <code class="docutils literal notranslate"><span class="pre">True</span></code> (default) then apply the VOI LUT,
otherwise apply the windowing operation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array with applied VOI LUT or windowing operation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)">numpy.ndarray</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>When the dataset requires a modality LUT or rescale operation as part of
the Modality LUT module then that must be applied before any windowing
operation.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_modality_lut" title="pydicom.pixel_data_handlers.util.apply_modality_lut"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_modality_lut()</span></code></a>, <a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_voi" title="pydicom.pixel_data_handlers.util.apply_voi"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_voi()</span></code></a>, <a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_windowing" title="pydicom.pixel_data_handlers.util.apply_windowing"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_windowing()</span></code></a></p>
</div>
<p class="rubric">References</p>
<ul class="simple">
<li><p>DICOM Standard, Part 3, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.11.html#sect_C.11.2">Annex C.11.2</a></p></li>
<li><p>DICOM Standard, Part 3, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.8.11.3.html#sect_C.8.11.3.1.5">Annex C.8.11.3.1.5</a></p></li>
<li><p>DICOM Standard, Part 4, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part04/sect_N.2.html#sect_N.2.1.1">Annex N.2.1.1</a></p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.apply_windowing">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">apply_windowing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">np.ndarray</span></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L487"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.apply_windowing" title="Link to this definition">¶</a></dt>
<dd><p>Apply a windowing operation to <cite>arr</cite>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>numpy.ndarray</em></a>) – The <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a> to apply the windowing operation to.</p></li>
<li><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>dataset.Dataset</em></a>) – A dataset containing a <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.11.2.html">VOI LUT Module</a>.
If (0028,1050) <em>Window Center</em> and (0028,1051) <em>Window Width</em> are
present then returns an array of <code class="docutils literal notranslate"><span class="pre">np.float64</span></code>, otherwise <cite>arr</cite> will
be returned unchanged.</p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><em>optional</em>) – When the VOI LUT Module contains multiple alternative views, this is
the index of the view to return (default <code class="docutils literal notranslate"><span class="pre">0</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array with applied windowing operation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)">numpy.ndarray</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>When the dataset requires a modality LUT or rescale operation as part of
the Modality LUT module then that must be applied before any windowing
operation.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_modality_lut" title="pydicom.pixel_data_handlers.util.apply_modality_lut"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_modality_lut()</span></code></a>, <a class="reference internal" href="#pydicom.pixel_data_handlers.util.apply_voi" title="pydicom.pixel_data_handlers.util.apply_voi"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_voi()</span></code></a></p>
</div>
<p class="rubric">References</p>
<ul class="simple">
<li><p>DICOM Standard, Part 3, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.11.html#sect_C.11.2">Annex C.11.2</a></p></li>
<li><p>DICOM Standard, Part 3, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.8.11.3.html#sect_C.8.11.3.1.5">Annex C.8.11.3.1.5</a></p></li>
<li><p>DICOM Standard, Part 4, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part04/sect_N.2.html#sect_N.2.1.1">Annex N.2.1.1</a></p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.convert_color_space">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">convert_color_space</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><span class="pre">ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">desired</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_frame</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><span class="pre">ndarray</span></a></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L621"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.convert_color_space" title="Link to this definition">¶</a></dt>
<dd><p>Convert the image(s) in <cite>arr</cite> from one color space to another.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.2: </span>Added <cite>per_frame</cite> keyword parameter.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>numpy.ndarray</em></a>) – The image(s) as a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> with
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.shape.html#numpy.ndarray.shape" title="(in NumPy v1.26)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">shape</span></code></a> (frames, rows, columns, 3)
or (rows, columns, 3).</p></li>
<li><p><strong>current</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The current color space, should be a valid value for (0028,0004)
<em>Photometric Interpretation</em>. One of <code class="docutils literal notranslate"><span class="pre">'RGB'</span></code>, <code class="docutils literal notranslate"><span class="pre">'YBR_FULL'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'YBR_FULL_422'</span></code>.</p></li>
<li><p><strong>desired</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The desired color space, should be a valid value for (0028,0004)
<em>Photometric Interpretation</em>. One of <code class="docutils literal notranslate"><span class="pre">'RGB'</span></code>, <code class="docutils literal notranslate"><span class="pre">'YBR_FULL'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'YBR_FULL_422'</span></code>.</p></li>
<li><p><strong>per_frame</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> and the input array contains multiple frames then process
each frame individually to reduce memory usage. Default <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The image(s) converted to the desired color space.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)">numpy.ndarray</a></p>
</dd>
</dl>
<p class="rubric">References</p>
<ul class="simple">
<li><p>DICOM Standard, Part 3,
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.3.html#sect_C.7.6.3.1.2">Annex C.7.6.3.1.2</a></p></li>
<li><p>ISO/IEC 10918-5:2012 (<a class="reference external" href="https://www.ijg.org/files/T-REC-T.871-201105-I!!PDF-E.pdf">ITU T.871</a>),
Section 7</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.dtype_corrected_for_endianness">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">dtype_corrected_for_endianness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_little_endian</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">numpy_dtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><span class="pre">dtype</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><span class="pre">dtype</span></a></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L788"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.dtype_corrected_for_endianness" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code></a> corrected for system and <code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code>
endianness.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>is_little_endian</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – The endianness of the affected <a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>.</p></li>
<li><p><strong>numpy_dtype</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><em>numpy.dtype</em></a>) – The numpy data type used for the <em>Pixel Data</em> without considering
endianness.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.12)"><strong>ValueError</strong></a> – If <cite>is_little_endian</cite> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, e.g. not initialized.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The numpy data type used for the <em>Pixel Data</em> without considering
endianness.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)">numpy.dtype</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.expand_ybr422">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">expand_ybr422</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.ByteString" title="(in Python v3.12)"><span class="pre">ByteString</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bits_allocated</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L825"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.expand_ybr422" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">YBR_FULL_422</span></code> data expanded to <code class="docutils literal notranslate"><span class="pre">YBR_FULL</span></code>.</p>
<p>Uncompressed datasets with a (0028,0004) <em>Photometric Interpretation</em> of
<code class="docutils literal notranslate"><span class="pre">&quot;YBR_FULL_422&quot;</span></code> are subsampled in the horizontal direction by halving
the number of Cb and Cr pixels (i.e. there are two Y pixels for every Cb
and Cr pixel). This function expands the <code class="docutils literal notranslate"><span class="pre">YBR_FULL_422</span></code> data to remove
the subsampling and the output is therefore <code class="docutils literal notranslate"><span class="pre">YBR_FULL</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><em>bytes</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.12)"><em>bytearray</em></a>) – The YBR_FULL_422 pixel data to be expanded.</p></li>
<li><p><strong>bits_allocated</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – The number of bits used to store each pixel, as given by (0028,0100)
<em>Bits Allocated</em>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The expanded data (as YBR_FULL).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)">bytes</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.get_expected_length">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">get_expected_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'bytes'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L976"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.get_expected_length" title="Link to this definition">¶</a></dt>
<dd><p>Return the expected length (in terms of bytes or pixels) of the <em>Pixel
Data</em>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Element</p></th>
<th class="head" rowspan="2"><p>Required or
optional</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Tag</p></th>
<th class="head"><p>Keyword</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>(0028,0002)</p></td>
<td><p>SamplesPerPixel</p></td>
<td><p>1</p></td>
<td><p>Required</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0004)</p></td>
<td><p>PhotometricInterpretation</p></td>
<td><p>1</p></td>
<td><p>Required</p></td>
</tr>
<tr class="row-odd"><td><p>(0028,0008)</p></td>
<td><p>NumberOfFrames</p></td>
<td><p>1C</p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0010)</p></td>
<td><p>Rows</p></td>
<td><p>1</p></td>
<td><p>Required</p></td>
</tr>
<tr class="row-odd"><td><p>(0028,0011)</p></td>
<td><p>Columns</p></td>
<td><p>1</p></td>
<td><p>Required</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0100)</p></td>
<td><p>BitsAllocated</p></td>
<td><p>1</p></td>
<td><p>Required</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>Dataset</em></a>) – The <a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> containing the Image Pixel module
and <em>Pixel Data</em>.</p></li>
<li><p><strong>unit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">'bytes'</span></code> then returns the expected length of the <em>Pixel Data</em> in
whole bytes and NOT including an odd length trailing NULL padding
byte. If <code class="docutils literal notranslate"><span class="pre">'pixels'</span></code> then returns the expected length of the <em>Pixel
Data</em> in terms of the total number of pixels (default <code class="docutils literal notranslate"><span class="pre">'bytes'</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The expected length of the <em>Pixel Data</em> in either whole bytes or
pixels, excluding the NULL trailing padding byte for odd length data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.get_image_pixel_ids">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">get_image_pixel_ids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L1042"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.get_image_pixel_ids" title="Link to this definition">¶</a></dt>
<dd><p>Return a dict of the pixel data affecting element’s <a class="reference external" href="https://docs.python.org/3/library/functions.html#id" title="(in Python v3.12)"><code class="xref py py-func docutils literal notranslate"><span class="pre">id()</span></code></a> values.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Element</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Tag</p></th>
<th class="head"><p>Keyword</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>(0028,0002)</p></td>
<td><p>SamplesPerPixel</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0004)</p></td>
<td><p>PhotometricInterpretation</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>(0028,0006)</p></td>
<td><p>PlanarConfiguration</p></td>
<td><p>1C</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0008)</p></td>
<td><p>NumberOfFrames</p></td>
<td><p>1C</p></td>
</tr>
<tr class="row-odd"><td><p>(0028,0010)</p></td>
<td><p>Rows</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0011)</p></td>
<td><p>Columns</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>(0028,0100)</p></td>
<td><p>BitsAllocated</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0101)</p></td>
<td><p>BitsStored</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>(0028,0103)</p></td>
<td><p>PixelRepresentation</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>(7FE0,0008)</p></td>
<td><p>FloatPixelData</p></td>
<td><p>1C</p></td>
</tr>
<tr class="row-odd"><td><p>(7FE0,0009)</p></td>
<td><p>DoubleFloatPixelData</p></td>
<td><p>1C</p></td>
</tr>
<tr class="row-even"><td><p>(7FE0,0010)</p></td>
<td><p>PixelData</p></td>
<td><p>1C</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>Dataset</em></a>) – The <a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> containing the pixel data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dict containing the <a class="reference external" href="https://docs.python.org/3/library/functions.html#id" title="(in Python v3.12)"><code class="xref py py-func docutils literal notranslate"><span class="pre">id()</span></code></a> values for the elements that affect
the pixel data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.get_j2k_parameters">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">get_j2k_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">codestream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L1105"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.get_j2k_parameters" title="Link to this definition">¶</a></dt>
<dd><p>Return a dict containing JPEG 2000 component parameters.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>codestream</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><em>bytes</em></a>) – The JPEG 2000 (ISO/IEC 15444-1) codestream to be parsed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dict containing parameters for the first component sample in the
JPEG 2000 <cite>codestream</cite>, or an empty dict if unable to parse the data.
Available parameters are <code class="docutils literal notranslate"><span class="pre">{&quot;precision&quot;:</span> <span class="pre">int,</span> <span class="pre">&quot;is_signed&quot;:</span> <span class="pre">bool}</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.get_nr_frames">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">get_nr_frames</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">warn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L1143"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.get_nr_frames" title="Link to this definition">¶</a></dt>
<dd><p>Return NumberOfFrames or 1 if NumberOfFrames is None or 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>dataset.Dataset</em></a>) – The <a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> containing the Image Pixel module
corresponding to the data in <cite>arr</cite>.</p></li>
<li><p><strong>warn</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> (the default), a warning is issued if NumberOfFrames
has an invalid value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An integer for the NumberOfFrames or 1 if NumberOfFrames is None or 0</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.pack_bits">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">pack_bits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><span class="pre">ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L1174"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.pack_bits" title="Link to this definition">¶</a></dt>
<dd><p>Pack a binary <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> for use with <em>Pixel Data</em>.</p>
<p>Should be used in conjunction with (0028,0100) <em>Bits Allocated</em> = 1.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.1: </span>Added the <cite>pad</cite> keyword parameter and changed to allow <cite>arr</cite> to be
2 or 3D.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>numpy.ndarray</em></a>) – The <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> containing 1-bit data as ints. <cite>arr</cite> must
only contain integer values of 0 and 1 and must have an ‘uint’  or
‘int’ <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code></a>. For the sake of efficiency it’s recommended
that the length of <cite>arr</cite> be a multiple of 8 (i.e. that any empty
bit-padding to round out the byte has already been added). The input
<cite>arr</cite> should either be shaped as (rows, columns) or (frames, rows,
columns) or the equivalent 1D array used to ensure that the packed
data is in the correct order.</p></li>
<li><p><strong>pad</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> (default) then add a null byte to the end of the packed
data to ensure even length, otherwise no padding will be added.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The bit packed data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)">bytes</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.12)"><strong>ValueError</strong></a> – If <cite>arr</cite> contains anything other than 0 or 1.</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>DICOM Standard, Part 5,
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part05/chapter_8.html#sect_8.1.1">Section 8.1.1</a> and
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part05/chapter_D.html">Annex D</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.pixel_dtype">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">pixel_dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_float</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">np.dtype</span></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L1240"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.pixel_dtype" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code></a> for the pixel data in <cite>ds</cite>.</p>
<p>Suitable for use with IODs containing the Image Pixel module (with
<code class="docutils literal notranslate"><span class="pre">as_float=False</span></code>) and the Floating Point Image Pixel and Double Floating
Point Image Pixel modules (with <code class="docutils literal notranslate"><span class="pre">as_float=True</span></code>).</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Element</p></th>
<th class="head" rowspan="2"><p>Supported
values</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Tag</p></th>
<th class="head"><p>Keyword</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>(0028,0101)</p></td>
<td><p>BitsAllocated</p></td>
<td><p>1</p></td>
<td><p>1, 8, 16, 32, 64</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0103)</p></td>
<td><p>PixelRepresentation</p></td>
<td><p>1</p></td>
<td><p>0, 1</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>Dataset</em></a>) – The <a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> containing the pixel data you
wish to get the data type for.</p></li>
<li><p><strong>as_float</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> then return a float dtype, otherwise return an integer
dtype (default <code class="docutils literal notranslate"><span class="pre">False</span></code>). Float dtypes are only supported when
(0028,0101) <em>Bits Allocated</em> is 32 or 64.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code></a> suitable for containing the pixel data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)">numpy.dtype</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#NotImplementedError" title="(in Python v3.12)"><strong>NotImplementedError</strong></a> – If the pixel data is of a type that isn’t supported by either numpy
    or <em>pydicom</em>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.reshape_pixel_array">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">reshape_pixel_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><span class="pre">Dataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">np.ndarray</span></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L1346"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.reshape_pixel_array" title="Link to this definition">¶</a></dt>
<dd><p>Return a reshaped <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> <cite>arr</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Element</p></th>
<th class="head" rowspan="2"><p>Supported
values</p></th>
<th class="head" rowspan="2"></th>
</tr>
<tr class="row-even"><th class="head"><p>Tag</p></th>
<th class="head"><p>Keyword</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>(0028,0002)</p></td>
<td><p>SamplesPerPixel</p></td>
<td><p>1</p></td>
<td><p>N &gt; 0</p></td>
<td><p>Required</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0006)</p></td>
<td><p>PlanarConfiguration</p></td>
<td><p>1C</p></td>
<td><p>0, 1</p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-odd"><td><p>(0028,0008)</p></td>
<td><p>NumberOfFrames</p></td>
<td><p>1C</p></td>
<td><p>N &gt; 0</p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-even"><td><p>(0028,0010)</p></td>
<td><p>Rows</p></td>
<td><p>1</p></td>
<td><p>N &gt; 0</p></td>
<td><p>Required</p></td>
</tr>
<tr class="row-odd"><td><p>(0028,0011)</p></td>
<td><p>Columns</p></td>
<td><p>1</p></td>
<td><p>N &gt; 0</p></td>
<td><p>Required</p></td>
</tr>
</tbody>
</table>
<p>(0028,0008) <em>Number of Frames</em> is required when <em>Pixel Data</em> contains
more than 1 frame. (0028,0006) <em>Planar Configuration</em> is required when
(0028,0002) <em>Samples per Pixel</em> is greater than 1. For certain
compressed transfer syntaxes it is always taken to be either 0 or 1 as
shown in the table below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Transfer Syntax</p></th>
<th class="head" rowspan="2"><p>Planar Configuration</p></th>
</tr>
<tr class="row-even"><th class="head"><p>UID</p></th>
<th class="head"><p>Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>1.2.840.10008.1.2.4.50</p></td>
<td><p>JPEG Baseline</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>1.2.840.10008.1.2.4.57</p></td>
<td><p>JPEG Lossless,
Non-hierarchical</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>1.2.840.10008.1.2.4.70</p></td>
<td><p>JPEG Lossless,
Non-hierarchical,
SV1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>1.2.840.10008.1.2.4.80</p></td>
<td><p>JPEG-LS Lossless</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>1.2.840.10008.1.2.4.81</p></td>
<td><p>JPEG-LS Lossy</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>1.2.840.10008.1.2.4.90</p></td>
<td><p>JPEG 2000 Lossless</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>1.2.840.10008.1.2.4.91</p></td>
<td><p>JPEG 2000 Lossy</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>1.2.840.10008.1.2.5</p></td>
<td><p>RLE Lossless</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.1: </span>JPEG-LS transfer syntaxes changed to <em>Planar Configuration</em> of 0</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><em>dataset.Dataset</em></a>) – The <a class="reference internal" href="pydicom.dataset.Dataset.html#pydicom.dataset.Dataset" title="pydicom.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> containing the Image Pixel module
corresponding to the data in <cite>arr</cite>.</p></li>
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>numpy.ndarray</em></a>) – The 1D array containing the pixel data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>A reshaped array containing the pixel data. The shape of the array
depends on the contents of the dataset:</p>
<ul class="simple">
<li><p>For single frame, single sample data (rows, columns)</p></li>
<li><p>For single frame, multi-sample data (rows, columns, planes)</p></li>
<li><p>For multi-frame, single sample data (frames, rows, columns)</p></li>
<li><p>For multi-frame, multi-sample data (frames, rows, columns, planes)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)">numpy.ndarray</a></p>
</dd>
</dl>
<p class="rubric">References</p>
<ul class="simple">
<li><p>DICOM Standard, Part 3,
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.3.html#sect_C.7.6.3.1">Annex C.7.6.3.1</a></p></li>
<li><p>DICOM Standard, Part 5, <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part05/sect_8.2.html">Section 8.2</a></p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pydicom.pixel_data_handlers.util.unpack_bits">
<span class="sig-prename descclassname"><span class="pre">pydicom.pixel_data_handlers.util.</span></span><span class="sig-name descname"><span class="pre">unpack_bits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><span class="pre">ndarray</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a></span></span><a class="reference external" href="https://github.com/pydicom/pydicom/blob/2877aa63b/pydicom/pixel_data_handlers/util.py#L1493"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pydicom.pixel_data_handlers.util.unpack_bits" title="Link to this definition">¶</a></dt>
<dd><p>Unpack the bit-packed data in <cite>src</cite>.</p>
<p>Suitable for use when (0028,0011) <em>Bits Allocated</em> or (60xx,0100) <em>Overlay
Bits Allocated</em> is 1.</p>
<p>If <a class="reference external" href="https://numpy.org/">NumPy</a> is available then it will be used to
unpack the data, otherwise only the standard library will be used, which
is about 20 times slower.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.3: </span>Added the <cite>as_array</cite> keyword parameter, support for unpacking
without NumPy, and added <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> as a possible return type</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><em>bytes</em></a>) – The bit-packed data.</p></li>
<li><p><strong>as_array</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">False</span></code> then return the unpacked data as <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, otherwise
return a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> (default, requires NumPy).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked data as an <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> (if NumPy is available
and <code class="docutils literal notranslate"><span class="pre">as_array</span> <span class="pre">==</span> <span class="pre">True</span></code>) or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)">bytes</a> or <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)">numpy.ndarray</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.12)"><strong>ValueError</strong></a> – If <cite>as_array</cite> is <code class="docutils literal notranslate"><span class="pre">True</span></code> and NumPy is not available.</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>DICOM Standard, Part 5,
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part05/chapter_8.html#sect_8.1.1">Section 8.1.1</a> and
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part05/chapter_D.html">Annex D</a></p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pydicom.pixel_data_handlers.convert_color_space.html" class="btn btn-neutral float-left" title="pydicom.pixel_data_handlers.convert_color_space" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../misc.html" class="btn btn-neutral float-right" title="Miscellaneous (pydicom.misc)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2008-2024, Darcy Mason and pydicom contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>